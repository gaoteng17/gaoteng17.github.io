---
title: 【信息网络学习day4 H3C设备配置ssh】
date: 2019-07-26 19:38:26
tags: [信息网络, H3C, ssh]
---

信息网络培训学习第四天，今天在H3C交换机S5500实机（v5）及H3C交换机S5130（v7）模拟器上配置ssh。

本文分别记录在H3C v5和v7系统版本下的ssh配置命令。

<!-- more -->

# H3C v5

## 配置

```
[H3C]ssh server enable //开启ssh服务

[H3C]public-key local create rsa //生成RSA和DSA密钥对，默认1024位
[H3C]public-key local create dsa //创建后，交换机重启后依然存在

[H3C]user-interface vty 0 4
[H3C-ui-vty0-4]authentication-mode scheme //ssh只支持scheme模式
[H3C-ui-vty0-4]user privilege level 3 //设置vty权限
[H3C-ui-vty0-4]protocol inbound ssh //（可选）只允许登录方式为ssh
[H3C-ui-vty0-4]quit

[H3C]local-user admin //创建本地用户
[H3C-luser-admin]password simple 123456 //simple明文、cipher密文
[H3C-luser-admin]service-type ssh //服务类型ssh
[H3C-luser-admin]authorization-attribute level 3 //设置本地用户权限
```

## 验证

配置管理vlan地址为**192.168.1.1/24**，本地地址设置为**192.168.1.2**，在XShell中输入`ssh 192.168.1.1`连接交换机。

![](./1015/1.PNG)

![](./1015/2.PNG)

输入用户名与密码后成功登录交换机。

![](./1015/3.PNG)

# H3C v7

## 配置

```
[H3C]ssh server enable //开启ssh服务

[H3C]public-key local create rsa //生成RSA和DSA密钥对，默认1024位
[H3C]public-key local create dsa //创建后，交换机重启后依然存在

[H3C]line vty 0 4
[H3C-line-vty0-4]authentication-mode scheme //ssh只支持scheme模式
[H3C-line-vty0-4]user-role network-admin //设置vty权限
[H3C-line-vty0-4]protocol inbound ssh //（可选）只允许登录方式为ssh
[H3C-line-vty0-4]quit

[H3C]local-user admin //创建本地用户
[H3C-luser-manage-admin]password simple 123456 //simple明文、cipher密文
[H3C-luser-manage-admin]service-type ssh //服务类型ssh
[H3C-luser-manage-admin]authorization-attribute user-role network-admin //设置本地用户权限
```

# 总结

v5版本与v7版本的命令大致一致，区别主要在权限的配置命令上。

另外v5版本的vty只能开启<0-4>，而v7版本的vty可以开启<0-63>。